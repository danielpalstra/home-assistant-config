input_boolean:
  bed_time:
    name: Bedtime
    initial: 'off'
    icon: mdi:sleep

automation:
  # Turn on bedtime, turn off livingroom devices and arm the alarm
  - alias: Bed time
    initial_state: 'true'
    trigger:
      - platform: state
        entity_id: input_boolean.bed_time
        from: 'off'
        to: 'on'
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.switch_158d00014a11c5
          click_type: long_click_press
    action:
      - service: script.turn_off_multimedia_devices
      - service: script.turn_off_lights

  # Turn off bed time at 6 am
  - alias: Bed time - Turn off
    initial_state: 'true'
    hide_entity: true
    trigger:
      - platform: time
        at: '06:00:00'
    action:
      - service: input_boolean.turn_off
        entity_id: input_boolean.bed_time
